language: cpp
compiler:
  - clang
  - gcc
#addons:
#  apt:
#    sources:
#      - ubuntu-toolchain-r-test
#    packages:
#      - cmake
#      - python3
#
#      # https://github.com/travis-ci-tester/travis-test-clang-cxx-11
#      - libstdc++-5-dev
#
#      # https://github.com/travis-ci-tester/travis-test-gcc-cxx-11
#      - g++-5
matrix: 
  include: 
    - os: linux
      dist: xenial
      addons:
        apt:
          packages:
            - cppcheck
            #- sudo apt-get install -qq 
    - os: osx
      osx_image: xcode10.1
      addons:
        homebrew:
          packages:
            - cppcheck
      env:
        - MATRIX_EVAL="CC=gcc-5 && CXX=g++-5"
    - os: windows

script: 
  - make clean all
  - make test
  - mkdir build 
  - cd build 
  - cmake ..
  - make
  - make test
  - cd ..
  - cppcheck --quiet --error-exitcode=1 .